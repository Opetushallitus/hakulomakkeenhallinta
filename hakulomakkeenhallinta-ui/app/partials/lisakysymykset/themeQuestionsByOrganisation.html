<div class="alert alert-info alert-block ">
    <i class="glyphicon glyphicon-info-sign"></i>
    <span data-ng-bind-html="t('olet.luomassa.lisakysymys.organisaatiolla', [ haunNimi, organisationNimi])"></span>
</div>
<alertmsg></alertmsg>

<lisakysymys-lista-napit></lisakysymys-lista-napit>

<h3 class="text-info" tl="hakukohdekohtaiset.lisakysymykset" >Hakukohdekohtaiset lisäkysymykset</h3>
<hr>
<div class="from-group">


    <div data-ng-repeat="theme in themes">


        <teema-otsikko teema="{{theme}}"></teema-otsikko>
        <div data-ng-repeat="hakukohde in theme.hkkohde" data-ng-show="naytaHakukohteet">
            <div data-ng-show="hakukohde.additionalQuestions.length >0" style="margin-left: 30px;">
                <hakukohde-lisakysymykset hakukohdeolio="{{hakukohde}}"></hakukohde-lisakysymykset>

                <ul data-ng-show="naytaHakukohdeQues" class="hh-hierarkia-list">
                    <li data-ng-repeat="question in hakukohde.additionalQuestions | orderBy:'ordinal'" >
                       <lisakysymykset></lisakysymykset>
                        <ul data-ng-show="question.options && naytaVastaukset" class="hh-hierarkia-list">
                            <li data-ng-repeat="option in question.options">
                                <div>
                                    <i class="icon-comment-empty"></i>
                                    <div class="dropdown" data-ng-show="sortBtns">
                                        <a class="dropdown-toggle">
                                            <i class="hh-icon-menu"></i>
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li data-ng-click="addQuestion(theme)"><a>{{ t('lisaa.uusi.kysymys') || 'Lisää uusi kysymys' }} <i class="glyphicon glyphicon-plus"></i></a></li>
                                            <li data-ng-click="lisaaSaanto(hakukohde.additionalQuestions)" ><a>{{ t('lisaa.saanto') || 'Lisää sääntö' }} <i class="glyphicon glyphicon-plus"></i></a></li>
                                        </ul>
                                    </div>
                                    {{option | i18n:'optionText':userLang}}
                                </div>
                                <ul class="hh-hierarkia-list" data-ng-if="question.attachmentRequests.length >0">
                                    <li data-ng-repeat="liitepyynto in question.attachmentRequests">
                                        <div data-ng-show="option.id === liitepyynto.attachedToOptionId" class="icon-attach">
                                            {{liitepyynto | i18n:'header':userLang}} <b>osoitteeseen:</b>
                                            <span data-ng-show="!liitepyynto.useGroupAddress"> {{liitepyynto.deliveryAddress.street}}, {{liitepyynto.deliveryAddress.postCode}}, {{liitepyynto.deliveryAddress.postOffice}}</span>
                                            <span data-ng-show="liitepyynto.useGroupAddress"> Liitteiden toimitukseen käytetään ryhmän osoitetta. </span>
                                            <b>toimitettava mennessä:</b> {{liitepyynto.deliveryDue | date:'dd.MM.yyyy'}} <b>klo:</b> {{liitepyynto.deliveryDue | date:'HH:mm'}}
                                        </div>
                                    </li>
                                </ul>
                                <ul class="hh-hierarkia-list" data-ng-if="option.questions.length > 0">
                                    <li data-ng-repeat="question in option.questions">
                                        <lisakysymykset></lisakysymykset>
                                        <ul data-ng-show="question.options && naytaVastaukset" class="hh-hierarkia-list">
                                            <li data-ng-repeat="option in question.options">
                                                <div>
                                                    <i class="icon-comment-empty"></i>
                                                    <div class="dropdown" data-ng-show="sortBtns">
                                                        <a class="dropdown-toggle">
                                                            <i class="hh-icon-menu"></i>
                                                        </a>
                                                        <ul class="dropdown-menu">
                                                            <li data-ng-click="addQuestion(theme)"><a>{{ t('lisaa.uusi.kysymys') || 'Lisää uusi kysymys' }} <i class="glyphicon glyphicon-plus"></i></a></li>
                                                            <li data-ng-click="lisaaSaanto(hakukohde.additionalQuestions)" ><a>{{ t('lisaa.saanto') || 'Lisää sääntö' }} <i class="glyphicon glyphicon-plus"></i></a></li>
                                                        </ul>
                                                    </div>
                                                    {{option | i18n:'optionText':userLang}}
                                                </div>
                                                <ul class="hh-hierarkia-list" data-ng-if="question.attachmentRequests.length >0">
                                                    <li data-ng-repeat="liitepyynto in question.attachmentRequests">
                                                        <div data-ng-show="option.id === liitepyynto.attachedToOptionId" class="icon-attach">
                                                            {{liitepyynto | i18n:'header':userLang}} <b>osoitteeseen:</b>
                                                            <span data-ng-show="!liitepyynto.useGroupAddress"> {{liitepyynto.deliveryAddress.street}}, {{liitepyynto.deliveryAddress.postCode}}, {{liitepyynto.deliveryAddress.postOffice}}</span>
                                                            <span data-ng-show="liitepyynto.useGroupAddress"> Liitteiden toimitukseen käytetään ryhmän osoitetta. </span>
                                                            <b>toimitettava mennessä:</b> {{liitepyynto.deliveryDue | date:'dd.MM.yyyy'}} <b>klo:</b> {{liitepyynto.deliveryDue | date:'HH:mm'}}
                                                        </div>
                                                    </li>
                                                </ul>
                                            </ul>
                                    </li>
                                </ul>
                                <!--
                                <ul class="hh-hierarkia-list">
                                    <li data-ng-repeat="question in option.questions" data-ng-controller="hakukohdeKysymysCtrl">
                                        <div class="icon"
                                             data-ng-class="{'icon-edit':question.type ==='TextQuestion', 'icon-dot-circled':question.type ==='RadioButton', 'icon-check':question.type ==='CheckBox'}">
                                            &lt;!&ndash;{{jatkokys | i18n:'messageText':userLang}}&ndash;&gt;

                                            <div style="width: 70px; text-align: center;">
                                                <button class="btn btn-xs" data-ng-disabled="sortBtns || $first" data-ng-click="up($index)"><i class="glyphicon glyphicon-chevron-up"></i> </button>
                                                <button class="btn btn-xs" data-ng-disabled="sortBtns || $last" data-ng-click="down($index)"><i class="glyphicon glyphicon-chevron-down"></i></button>
                                            </div>

                                            <div style="width: 180px; text-align: center;">
                                                <button class="btn btn-xs" data-ng-click="muokkaaKysymysta(question, sortBtns)" data-ng-disabled="!sortBtns">{{ t('muokkaa') || 'Muokkaa' }} <i class="glyphicon glyphicon-edit"></i></button>
                                                <button class="btn btn-xs" data-ng-click="poistaKysymys(question, hakukohde.additionalQuestions)" data-ng-disabled="!sortBtns">{{ t('poista') || 'Poista' }} <i class="glyphicon glyphicon-remove"></i></button>
                                            </div>

                                            <div style="width: 12px;">
                                                {{question.ordinal}}
                                            </div>

                                            <div style="width: 340px;">
                                                <a data-ng-click="toggleNaytaVastaukset()" data-ng-disabled="!question.options" >{{ question | i18n:'messageText':userLang}}
                                                    <i class="glyphicon"
                                                       ng-class="{'glyphicon-chevron-down': naytaVastaukset, 'glyphicon-chevron-right': !naytaVastukset }"
                                                       data-ng-show="question.options"> </i>
                                                </a>
                                            </div>

                                            <div style="width: 140px;">
                                                {{ question.type | i18next }} <span data-ng-if="question.options.length >0">({{ question.options.length }})</span>
                                            </div>

                                            <div style="width: 140px;">
                                                <span data-ng-if="question.attachmentRequests.length >0">({{ question.attachmentRequests.length }})</span>
                                            </div>

                                            <div style="width: 140px;">
                                                <question-translations></question-translations>
                                            </div>
                                        </div>
                                    </li>
                                </ul>-->
                            <!--</li>

                        </ul>-->
                    </li>

                </ul>
            </div>
            <!--<pre>{{hakukohde | without | json}}</pre>-->
        </div>
        <hr>
    </div>
</div>
<br>

<lisakysymys-lista-napit></lisakysymys-lista-napit>

